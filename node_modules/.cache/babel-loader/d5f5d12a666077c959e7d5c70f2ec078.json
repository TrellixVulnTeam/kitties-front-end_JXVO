{"ast":null,"code":"import _classCallCheck from \"/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n// Copyright 2017-2021 @polkadot/api authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nvar recordIdentity = function recordIdentity(record) {\n  return record;\n};\n\nfunction filterAndApply(events, section, methods, onFound) {\n  return events.filter(function (_ref) {\n    var event = _ref.event;\n    return section === event.section && methods.includes(event.method);\n  }).map(function (record) {\n    return onFound(record);\n  });\n}\n\nfunction extractError() {\n  var events = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return filterAndApply(events, 'system', ['ExtrinsicFailed'], function (_ref2) {\n    var data = _ref2.event.data;\n    return data[0];\n  })[0];\n}\n\nfunction extractInfo() {\n  var events = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return filterAndApply(events, 'system', ['ExtrinsicFailed', 'ExtrinsicSuccess'], function (_ref3) {\n    var _ref3$event = _ref3.event,\n        data = _ref3$event.data,\n        method = _ref3$event.method;\n    return method === 'ExtrinsicSuccess' ? data[0] : data[1];\n  })[0];\n}\n\nexport var SubmittableResult = /*#__PURE__*/function () {\n  function SubmittableResult(_ref4) {\n    var dispatchError = _ref4.dispatchError,\n        dispatchInfo = _ref4.dispatchInfo,\n        events = _ref4.events,\n        internalError = _ref4.internalError,\n        status = _ref4.status;\n\n    _classCallCheck(this, SubmittableResult);\n\n    this.dispatchError = void 0;\n    this.dispatchInfo = void 0;\n    this.internalError = void 0;\n    this.events = void 0;\n    this.status = void 0;\n    this.dispatchError = dispatchError || extractError(events);\n    this.dispatchInfo = dispatchInfo || extractInfo(events);\n    this.events = events || [];\n    this.internalError = internalError;\n    this.status = status;\n  }\n\n  _createClass(SubmittableResult, [{\n    key: \"isCompleted\",\n    get: function get() {\n      return this.isError || this.status.isInBlock || this.status.isFinalized;\n    }\n  }, {\n    key: \"isError\",\n    get: function get() {\n      return this.status.isDropped || this.status.isFinalityTimeout || this.status.isInvalid || this.status.isUsurped;\n    }\n  }, {\n    key: \"isFinalized\",\n    get: function get() {\n      return this.status.isFinalized;\n    }\n  }, {\n    key: \"isInBlock\",\n    get: function get() {\n      return this.status.isInBlock;\n    }\n  }, {\n    key: \"isWarning\",\n    get: function get() {\n      return this.status.isRetracted;\n    }\n    /**\n     * @description Filters EventRecords for the specified method & section (there could be multiple)\n     */\n\n  }, {\n    key: \"filterRecords\",\n    value: function filterRecords(section, method) {\n      return filterAndApply(this.events, section, Array.isArray(method) ? method : [method], recordIdentity);\n    }\n    /**\n     * @description Finds an EventRecord for the specified method & section\n     */\n\n  }, {\n    key: \"findRecord\",\n    value: function findRecord(section, method) {\n      return this.filterRecords(section, method)[0];\n    }\n    /**\n     * @description Creates a human representation of the output\n     */\n\n  }, {\n    key: \"toHuman\",\n    value: function toHuman(isExtended) {\n      var _this$dispatchError, _this$dispatchInfo, _this$internalError;\n\n      return {\n        dispatchError: (_this$dispatchError = this.dispatchError) === null || _this$dispatchError === void 0 ? void 0 : _this$dispatchError.toHuman(),\n        dispatchInfo: (_this$dispatchInfo = this.dispatchInfo) === null || _this$dispatchInfo === void 0 ? void 0 : _this$dispatchInfo.toHuman(),\n        events: this.events.map(function (event) {\n          return event.toHuman(isExtended);\n        }),\n        internalError: (_this$internalError = this.internalError) === null || _this$internalError === void 0 ? void 0 : _this$internalError.message.toString(),\n        status: this.status.toHuman(isExtended)\n      };\n    }\n  }]);\n\n  return SubmittableResult;\n}();","map":{"version":3,"sources":["/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/@polkadot/api/submittable/Result.js"],"names":["recordIdentity","record","filterAndApply","events","section","methods","onFound","filter","event","includes","method","map","extractError","data","extractInfo","SubmittableResult","dispatchError","dispatchInfo","internalError","status","isError","isInBlock","isFinalized","isDropped","isFinalityTimeout","isInvalid","isUsurped","isRetracted","Array","isArray","filterRecords","isExtended","_this$dispatchError","_this$dispatchInfo","_this$internalError","toHuman","message","toString"],"mappings":"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","sourcesContent":["// Copyright 2017-2021 @polkadot/api authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nconst recordIdentity = record => record;\n\nfunction filterAndApply(events, section, methods, onFound) {\n  return events.filter(({\n    event\n  }) => section === event.section && methods.includes(event.method)).map(record => onFound(record));\n}\n\nfunction extractError(events = []) {\n  return filterAndApply(events, 'system', ['ExtrinsicFailed'], ({\n    event: {\n      data\n    }\n  }) => data[0])[0];\n}\n\nfunction extractInfo(events = []) {\n  return filterAndApply(events, 'system', ['ExtrinsicFailed', 'ExtrinsicSuccess'], ({\n    event: {\n      data,\n      method\n    }\n  }) => method === 'ExtrinsicSuccess' ? data[0] : data[1])[0];\n}\n\nexport class SubmittableResult {\n  constructor({\n    dispatchError,\n    dispatchInfo,\n    events,\n    internalError,\n    status\n  }) {\n    this.dispatchError = void 0;\n    this.dispatchInfo = void 0;\n    this.internalError = void 0;\n    this.events = void 0;\n    this.status = void 0;\n    this.dispatchError = dispatchError || extractError(events);\n    this.dispatchInfo = dispatchInfo || extractInfo(events);\n    this.events = events || [];\n    this.internalError = internalError;\n    this.status = status;\n  }\n\n  get isCompleted() {\n    return this.isError || this.status.isInBlock || this.status.isFinalized;\n  }\n\n  get isError() {\n    return this.status.isDropped || this.status.isFinalityTimeout || this.status.isInvalid || this.status.isUsurped;\n  }\n\n  get isFinalized() {\n    return this.status.isFinalized;\n  }\n\n  get isInBlock() {\n    return this.status.isInBlock;\n  }\n\n  get isWarning() {\n    return this.status.isRetracted;\n  }\n  /**\n   * @description Filters EventRecords for the specified method & section (there could be multiple)\n   */\n\n\n  filterRecords(section, method) {\n    return filterAndApply(this.events, section, Array.isArray(method) ? method : [method], recordIdentity);\n  }\n  /**\n   * @description Finds an EventRecord for the specified method & section\n   */\n\n\n  findRecord(section, method) {\n    return this.filterRecords(section, method)[0];\n  }\n  /**\n   * @description Creates a human representation of the output\n   */\n\n\n  toHuman(isExtended) {\n    var _this$dispatchError, _this$dispatchInfo, _this$internalError;\n\n    return {\n      dispatchError: (_this$dispatchError = this.dispatchError) === null || _this$dispatchError === void 0 ? void 0 : _this$dispatchError.toHuman(),\n      dispatchInfo: (_this$dispatchInfo = this.dispatchInfo) === null || _this$dispatchInfo === void 0 ? void 0 : _this$dispatchInfo.toHuman(),\n      events: this.events.map(event => event.toHuman(isExtended)),\n      internalError: (_this$internalError = this.internalError) === null || _this$internalError === void 0 ? void 0 : _this$internalError.message.toString(),\n      status: this.status.toHuman(isExtended)\n    };\n  }\n\n}"]},"metadata":{},"sourceType":"module"}