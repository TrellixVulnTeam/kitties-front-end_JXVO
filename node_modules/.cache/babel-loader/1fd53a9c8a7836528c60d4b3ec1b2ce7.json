{"ast":null,"code":"// Copyright 2017-2021 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { map, switchMap } from 'rxjs';\nimport { memo } from \"../util/index.js\";\nexport function _stakerSlashes(instanceId, api) {\n  return memo(instanceId, function (accountId, eras, withActive) {\n    var stakerId = api.registry.createType('AccountId', accountId).toString();\n    return api.derive.staking._erasSlashes(eras, withActive).pipe(map(function (slashes) {\n      return slashes.map(function (_ref) {\n        var era = _ref.era,\n            nominators = _ref.nominators,\n            validators = _ref.validators;\n        return {\n          era: era,\n          total: nominators[stakerId] || validators[stakerId] || api.registry.createType('Balance')\n        };\n      });\n    }));\n  });\n}\nexport function stakerSlashes(instanceId, api) {\n  return memo(instanceId, function (accountId) {\n    var withActive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return api.derive.staking.erasHistoric(withActive).pipe(switchMap(function (eras) {\n      return api.derive.staking._stakerSlashes(accountId, eras, withActive);\n    }));\n  });\n}","map":{"version":3,"sources":["/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/@polkadot/api-derive/staking/stakerSlashes.js"],"names":["map","switchMap","memo","_stakerSlashes","instanceId","api","accountId","eras","withActive","stakerId","registry","createType","toString","derive","staking","_erasSlashes","pipe","slashes","era","nominators","validators","total","stakerSlashes","erasHistoric"],"mappings":"AAAA;AACA;AACA,SAASA,GAAT,EAAcC,SAAd,QAA+B,MAA/B;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAO,SAASC,cAAT,CAAwBC,UAAxB,EAAoCC,GAApC,EAAyC;AAC9C,SAAOH,IAAI,CAACE,UAAD,EAAa,UAACE,SAAD,EAAYC,IAAZ,EAAkBC,UAAlB,EAAiC;AACvD,QAAMC,QAAQ,GAAGJ,GAAG,CAACK,QAAJ,CAAaC,UAAb,CAAwB,WAAxB,EAAqCL,SAArC,EAAgDM,QAAhD,EAAjB;AACA,WAAOP,GAAG,CAACQ,MAAJ,CAAWC,OAAX,CAAmBC,YAAnB,CAAgCR,IAAhC,EAAsCC,UAAtC,EAAkDQ,IAAlD,CAAuDhB,GAAG,CAAC,UAAAiB,OAAO;AAAA,aAAIA,OAAO,CAACjB,GAAR,CAAY;AAAA,YACvFkB,GADuF,QACvFA,GADuF;AAAA,YAEvFC,UAFuF,QAEvFA,UAFuF;AAAA,YAGvFC,UAHuF,QAGvFA,UAHuF;AAAA,eAIlF;AACLF,UAAAA,GAAG,EAAHA,GADK;AAELG,UAAAA,KAAK,EAAEF,UAAU,CAACV,QAAD,CAAV,IAAwBW,UAAU,CAACX,QAAD,CAAlC,IAAgDJ,GAAG,CAACK,QAAJ,CAAaC,UAAb,CAAwB,SAAxB;AAFlD,SAJkF;AAAA,OAAZ,CAAJ;AAAA,KAAR,CAA1D,CAAP;AAQD,GAVU,CAAX;AAWD;AACD,OAAO,SAASW,aAAT,CAAuBlB,UAAvB,EAAmCC,GAAnC,EAAwC;AAC7C,SAAOH,IAAI,CAACE,UAAD,EAAa,UAACE,SAAD;AAAA,QAAYE,UAAZ,uEAAyB,KAAzB;AAAA,WAAmCH,GAAG,CAACQ,MAAJ,CAAWC,OAAX,CAAmBS,YAAnB,CAAgCf,UAAhC,EAA4CQ,IAA5C,CAAiDf,SAAS,CAAC,UAAAM,IAAI;AAAA,aAAIF,GAAG,CAACQ,MAAJ,CAAWC,OAAX,CAAmBX,cAAnB,CAAkCG,SAAlC,EAA6CC,IAA7C,EAAmDC,UAAnD,CAAJ;AAAA,KAAL,CAA1D,CAAnC;AAAA,GAAb,CAAX;AACD","sourcesContent":["// Copyright 2017-2021 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { map, switchMap } from 'rxjs';\nimport { memo } from \"../util/index.js\";\nexport function _stakerSlashes(instanceId, api) {\n  return memo(instanceId, (accountId, eras, withActive) => {\n    const stakerId = api.registry.createType('AccountId', accountId).toString();\n    return api.derive.staking._erasSlashes(eras, withActive).pipe(map(slashes => slashes.map(({\n      era,\n      nominators,\n      validators\n    }) => ({\n      era,\n      total: nominators[stakerId] || validators[stakerId] || api.registry.createType('Balance')\n    }))));\n  });\n}\nexport function stakerSlashes(instanceId, api) {\n  return memo(instanceId, (accountId, withActive = false) => api.derive.staking.erasHistoric(withActive).pipe(switchMap(eras => api.derive.staking._stakerSlashes(accountId, eras, withActive))));\n}"]},"metadata":{},"sourceType":"module"}