{"ast":null,"code":"import _slicedToArray from \"/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _createClass2 from \"/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _inherits from \"/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classPrivateFieldLooseBase from \"@babel/runtime/helpers/esm/classPrivateFieldLooseBase\";\nimport _classPrivateFieldLooseKey from \"@babel/runtime/helpers/esm/classPrivateFieldLooseKey\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n} // Copyright 2017-2021 @polkadot/types authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable @typescript-eslint/no-var-requires */\n\n\nimport { assert, assertReturn, BN_ZERO, formatBalance, isFunction, isString, isU8a, logger, stringCamelCase, stringify, u8aToHex } from '@polkadot/util';\nimport { blake2AsU8a } from '@polkadot/util-crypto';\nimport { DoNotConstruct } from \"../codec/DoNotConstruct.js\";\nimport { Json } from \"../codec/Json.js\";\nimport { Raw } from \"../codec/Raw.js\";\nimport { expandExtensionTypes, fallbackExtensions, findUnknownExtensions } from \"../extrinsic/signedExtensions/index.js\";\nimport { GenericEventData } from \"../generic/Event.js\";\nimport * as baseTypes from \"../index.types.js\";\nimport * as definitions from \"../interfaces/definitions.js\";\nimport { decorateConstants, decorateExtrinsics } from \"../metadata/decorate/index.js\";\nimport { Metadata } from \"../metadata/Metadata.js\";\nimport { createClass as _createClass, getTypeClass } from \"./createClass.js\";\nimport { createTypeUnsafe as _createTypeUnsafe } from \"./createType.js\";\nimport { getTypeDef } from \"./getTypeDef.js\";\nvar l = logger('registry'); // create error mapping from metadata\n\nfunction injectErrors(_, metadata, metadataErrors) {\n  var modules = metadata.asLatest.modules; // decorate the errors\n\n  modules.forEach(function (_ref, _sectionIndex) {\n    var errors = _ref.errors,\n        index = _ref.index,\n        name = _ref.name;\n    var sectionIndex = metadata.version >= 12 ? index.toNumber() : _sectionIndex;\n    var sectionName = stringCamelCase(name);\n    errors.forEach(function (_ref2, index) {\n      var docs = _ref2.docs,\n          name = _ref2.name;\n      var eventIndex = new Uint8Array([sectionIndex, index]);\n      metadataErrors[u8aToHex(eventIndex)] = {\n        docs: docs.map(function (d) {\n          return d.toString();\n        }),\n        index: index,\n        method: name.toString(),\n        name: name.toString(),\n        section: sectionName\n      };\n    });\n  });\n} // create event classes from metadata\n\n\nfunction injectEvents(registry, metadata, metadataEvents) {\n  // decorate the events\n  metadata.asLatest.modules.filter(function (_ref3) {\n    var events = _ref3.events;\n    return events.isSome;\n  }).forEach(function (_ref4, _sectionIndex) {\n    var events = _ref4.events,\n        index = _ref4.index,\n        name = _ref4.name;\n    var sectionIndex = metadata.version >= 12 ? index.toNumber() : _sectionIndex;\n    var sectionName = stringCamelCase(name);\n    events.unwrap().forEach(function (meta, methodIndex) {\n      var methodName = meta.name.toString();\n      var typeDef = meta.args.map(function (arg) {\n        return getTypeDef(arg);\n      });\n      var Types = null; // Lazy create the actual type classes right at the point of use\n\n      var getTypes = function getTypes() {\n        if (!Types) {\n          Types = typeDef.map(function (typeDef) {\n            return getTypeClass(registry, typeDef);\n          });\n        }\n\n        return Types;\n      };\n\n      metadataEvents[u8aToHex(new Uint8Array([sectionIndex, methodIndex]))] = /*#__PURE__*/function (_GenericEventData) {\n        _inherits(_class, _GenericEventData);\n\n        var _super = _createSuper(_class);\n\n        function _class(registry, value) {\n          _classCallCheck(this, _class);\n\n          return _super.call(this, registry, value, getTypes(), typeDef, meta, sectionName, methodName);\n        }\n\n        return _class;\n      }(GenericEventData);\n    });\n  });\n} // create extrinsic mapping from metadata\n\n\nfunction injectExtrinsics(registry, metadata, metadataCalls) {\n  var extrinsics = decorateExtrinsics(registry, metadata.asLatest, metadata.version); // decorate the extrinsics\n\n  Object.values(extrinsics).forEach(function (methods) {\n    return Object.values(methods).forEach(function (method) {\n      metadataCalls[u8aToHex(method.callIndex)] = method;\n    });\n  });\n} // extract additional properties from the metadata\n\n\nfunction extractProperties(registry, metadata) {\n  var _constants$system;\n\n  var original = registry.getChainProperties();\n  var constants = decorateConstants(registry, metadata.asLatest, metadata.version);\n  var ss58Format = (_constants$system = constants.system) === null || _constants$system === void 0 ? void 0 : _constants$system.ss58Prefix;\n\n  if (!ss58Format) {\n    return original;\n  }\n\n  var _ref5 = original || {},\n      tokenDecimals = _ref5.tokenDecimals,\n      tokenSymbol = _ref5.tokenSymbol;\n\n  return registry.createType('ChainProperties', {\n    ss58Format: ss58Format,\n    tokenDecimals: tokenDecimals,\n    tokenSymbol: tokenSymbol\n  });\n}\n\nvar _classes = /*#__PURE__*/_classPrivateFieldLooseKey(\"classes\");\n\nvar _definitions = /*#__PURE__*/_classPrivateFieldLooseKey(\"definitions\");\n\nvar _metadata = /*#__PURE__*/_classPrivateFieldLooseKey(\"metadata\");\n\nvar _metadataCalls = /*#__PURE__*/_classPrivateFieldLooseKey(\"metadataCalls\");\n\nvar _metadataErrors = /*#__PURE__*/_classPrivateFieldLooseKey(\"metadataErrors\");\n\nvar _metadataEvents = /*#__PURE__*/_classPrivateFieldLooseKey(\"metadataEvents\");\n\nvar _unknownTypes = /*#__PURE__*/_classPrivateFieldLooseKey(\"unknownTypes\");\n\nvar _chainProperties = /*#__PURE__*/_classPrivateFieldLooseKey(\"chainProperties\");\n\nvar _hasher = /*#__PURE__*/_classPrivateFieldLooseKey(\"hasher\");\n\nvar _knownDefaults = /*#__PURE__*/_classPrivateFieldLooseKey(\"knownDefaults\");\n\nvar _knownDefinitions = /*#__PURE__*/_classPrivateFieldLooseKey(\"knownDefinitions\");\n\nvar _knownTypes = /*#__PURE__*/_classPrivateFieldLooseKey(\"knownTypes\");\n\nvar _signedExtensions = /*#__PURE__*/_classPrivateFieldLooseKey(\"signedExtensions\");\n\nvar _userExtensions = /*#__PURE__*/_classPrivateFieldLooseKey(\"userExtensions\");\n\nexport var TypeRegistry = /*#__PURE__*/function () {\n  function TypeRegistry(createdAtHash) {\n    _classCallCheck(this, TypeRegistry);\n\n    Object.defineProperty(this, _classes, {\n      writable: true,\n      value: new Map()\n    });\n    Object.defineProperty(this, _definitions, {\n      writable: true,\n      value: new Map()\n    });\n    Object.defineProperty(this, _metadata, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _metadataCalls, {\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, _metadataErrors, {\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, _metadataEvents, {\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, _unknownTypes, {\n      writable: true,\n      value: new Map()\n    });\n    Object.defineProperty(this, _chainProperties, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _hasher, {\n      writable: true,\n      value: blake2AsU8a\n    });\n    Object.defineProperty(this, _knownDefaults, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _knownDefinitions, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _knownTypes, {\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, _signedExtensions, {\n      writable: true,\n      value: fallbackExtensions\n    });\n    Object.defineProperty(this, _userExtensions, {\n      writable: true,\n      value: void 0\n    });\n    this.createdAtHash = void 0;\n    _classPrivateFieldLooseBase(this, _knownDefaults)[_knownDefaults] = _objectSpread({\n      Json: Json,\n      Metadata: Metadata,\n      Raw: Raw\n    }, baseTypes);\n    _classPrivateFieldLooseBase(this, _knownDefinitions)[_knownDefinitions] = definitions;\n    this.init();\n\n    if (createdAtHash) {\n      this.createdAtHash = this.createType('Hash', createdAtHash);\n    }\n  }\n\n  _createClass2(TypeRegistry, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      // start clean\n      _classPrivateFieldLooseBase(this, _classes)[_classes] = new Map();\n      _classPrivateFieldLooseBase(this, _definitions)[_definitions] = new Map();\n      _classPrivateFieldLooseBase(this, _unknownTypes)[_unknownTypes] = new Map();\n      _classPrivateFieldLooseBase(this, _knownTypes)[_knownTypes] = {}; // register know, first classes then on-demand-created definitions\n\n      this.register(_classPrivateFieldLooseBase(this, _knownDefaults)[_knownDefaults]);\n      Object.values(_classPrivateFieldLooseBase(this, _knownDefinitions)[_knownDefinitions]).forEach(function (_ref6) {\n        var types = _ref6.types;\n        return _this.register(types);\n      });\n      return this;\n    }\n  }, {\n    key: \"chainDecimals\",\n    get: function get() {\n      var _classPrivateFieldLoo;\n\n      if ((_classPrivateFieldLoo = _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties]) !== null && _classPrivateFieldLoo !== void 0 && _classPrivateFieldLoo.tokenDecimals.isSome) {\n        var allDecimals = _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties].tokenDecimals.unwrap();\n\n        if (allDecimals.length) {\n          return allDecimals.map(function (b) {\n            return b.toNumber();\n          });\n        }\n      }\n\n      return [12];\n    }\n  }, {\n    key: \"chainSS58\",\n    get: function get() {\n      var _classPrivateFieldLoo2;\n\n      return (_classPrivateFieldLoo2 = _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties]) !== null && _classPrivateFieldLoo2 !== void 0 && _classPrivateFieldLoo2.ss58Format.isSome ? _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties].ss58Format.unwrap().toNumber() : undefined;\n    }\n  }, {\n    key: \"chainTokens\",\n    get: function get() {\n      var _classPrivateFieldLoo3;\n\n      if ((_classPrivateFieldLoo3 = _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties]) !== null && _classPrivateFieldLoo3 !== void 0 && _classPrivateFieldLoo3.tokenSymbol.isSome) {\n        var allTokens = _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties].tokenSymbol.unwrap();\n\n        if (allTokens.length) {\n          return allTokens.map(function (s) {\n            return s.toString();\n          });\n        }\n      }\n\n      return [formatBalance.getDefaults().unit];\n    }\n    /**\n     * @description Returns tru if the type is in a Compat format\n     */\n\n  }, {\n    key: \"isLookupType\",\n    value: function isLookupType(value) {\n      return /Lookup\\d+$/.test(value);\n    }\n    /**\n     * @description Creates a lookup string from the supplied id\n     */\n\n  }, {\n    key: \"createLookupType\",\n    value: function createLookupType(lookupId) {\n      return \"Lookup\".concat(lookupId.toString());\n    }\n  }, {\n    key: \"knownTypes\",\n    get: function get() {\n      return _classPrivateFieldLooseBase(this, _knownTypes)[_knownTypes];\n    }\n  }, {\n    key: \"lookup\",\n    get: function get() {\n      throw new Error('Unimplemented'); // return this.metadata.lookup;\n    }\n  }, {\n    key: \"metadata\",\n    get: function get() {\n      assert(_classPrivateFieldLooseBase(this, _metadata)[_metadata], 'Metadata has not been set on this registry');\n      return _classPrivateFieldLooseBase(this, _metadata)[_metadata];\n    }\n  }, {\n    key: \"unknownTypes\",\n    get: function get() {\n      return _toConsumableArray(_classPrivateFieldLooseBase(this, _unknownTypes)[_unknownTypes].keys());\n    }\n  }, {\n    key: \"signedExtensions\",\n    get: function get() {\n      return _classPrivateFieldLooseBase(this, _signedExtensions)[_signedExtensions];\n    }\n    /**\n     * @describe Creates an instance of the class\n     */\n\n  }, {\n    key: \"createClass\",\n    value: function createClass(type) {\n      return _createClass(this, type);\n    }\n    /**\n     * @description Creates an instance of a type as registered\n     */\n\n  }, {\n    key: \"createType\",\n    value: function createType(type) {\n      for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        params[_key - 1] = arguments[_key];\n      }\n\n      return _createTypeUnsafe(this, type, params);\n    }\n    /**\n     * @description Creates an instance of a type as registered\n     */\n\n  }, {\n    key: \"createTypeUnsafe\",\n    value: function createTypeUnsafe(type, params, options) {\n      return _createTypeUnsafe(this, type, params, options);\n    } // find a specific call\n\n  }, {\n    key: \"findMetaCall\",\n    value: function findMetaCall(callIndex) {\n      var hexIndex = u8aToHex(callIndex);\n      return assertReturn(_classPrivateFieldLooseBase(this, _metadataCalls)[_metadataCalls][hexIndex], \"findMetaCall: Unable to find Call with index \".concat(hexIndex, \"/[\").concat(callIndex.toString(), \"]\"));\n    } // finds an error\n\n  }, {\n    key: \"findMetaError\",\n    value: function findMetaError(errorIndex) {\n      var hexIndex = u8aToHex(isU8a(errorIndex) ? errorIndex : new Uint8Array([errorIndex.index.toNumber(), errorIndex.error.toNumber()]));\n      return assertReturn(_classPrivateFieldLooseBase(this, _metadataErrors)[_metadataErrors][hexIndex], \"findMetaError: Unable to find Error with index \".concat(hexIndex, \"/[\").concat(errorIndex.toString(), \"]\"));\n    }\n  }, {\n    key: \"findMetaEvent\",\n    value: function findMetaEvent(eventIndex) {\n      var hexIndex = u8aToHex(eventIndex);\n      return assertReturn(_classPrivateFieldLooseBase(this, _metadataEvents)[_metadataEvents][hexIndex], \"findMetaEvent: Unable to find Event with index \".concat(hexIndex, \"/[\").concat(eventIndex.toString(), \"]\"));\n    }\n  }, {\n    key: \"get\",\n    value: function get(name, withUnknown) {\n      var Type = _classPrivateFieldLooseBase(this, _classes)[_classes].get(name); // we have not already created the type, attempt it\n\n\n      if (!Type) {\n        var definition = _classPrivateFieldLooseBase(this, _definitions)[_definitions].get(name);\n\n        var BaseType; // we have a definition, so create the class now (lazily)\n\n        if (definition) {\n          BaseType = _createClass(this, definition);\n        } else if (withUnknown) {\n          l.warn(\"Unable to resolve type \".concat(name, \", it will fail on construction\"));\n\n          _classPrivateFieldLooseBase(this, _unknownTypes)[_unknownTypes].set(name, true);\n\n          BaseType = DoNotConstruct.with(name);\n        }\n\n        if (BaseType) {\n          // NOTE If we didn't extend here, we would have strange artifacts. An example is\n          // Balance, with this, new Balance() instanceof u128 is true, but Balance !== u128\n          // Additionally, we now pass through the registry, which is a link to ourselves\n          Type = /*#__PURE__*/function (_BaseType) {\n            _inherits(Type, _BaseType);\n\n            var _super2 = _createSuper(Type);\n\n            function Type() {\n              _classCallCheck(this, Type);\n\n              return _super2.apply(this, arguments);\n            }\n\n            return Type;\n          }(BaseType);\n\n          _classPrivateFieldLooseBase(this, _classes)[_classes].set(name, Type);\n        }\n      }\n\n      return Type;\n    }\n  }, {\n    key: \"getChainProperties\",\n    value: function getChainProperties() {\n      return _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties];\n    }\n  }, {\n    key: \"getClassName\",\n    value: function getClassName(clazz) {\n      var entry = _toConsumableArray(_classPrivateFieldLooseBase(this, _classes)[_classes].entries()).find(function (_ref7) {\n        var _ref8 = _slicedToArray(_ref7, 2),\n            test = _ref8[1];\n\n        return test === clazz;\n      });\n\n      return entry ? entry[0] : undefined;\n    }\n  }, {\n    key: \"getDefinition\",\n    value: function getDefinition(typeName) {\n      return _classPrivateFieldLooseBase(this, _definitions)[_definitions].get(typeName);\n    }\n  }, {\n    key: \"getModuleInstances\",\n    value: function getModuleInstances(specName, moduleName) {\n      var _classPrivateFieldLoo4, _classPrivateFieldLoo5, _classPrivateFieldLoo6, _classPrivateFieldLoo7, _classPrivateFieldLoo8;\n\n      return (_classPrivateFieldLoo4 = _classPrivateFieldLooseBase(this, _knownTypes)[_knownTypes]) === null || _classPrivateFieldLoo4 === void 0 ? void 0 : (_classPrivateFieldLoo5 = _classPrivateFieldLoo4.typesBundle) === null || _classPrivateFieldLoo5 === void 0 ? void 0 : (_classPrivateFieldLoo6 = _classPrivateFieldLoo5.spec) === null || _classPrivateFieldLoo6 === void 0 ? void 0 : (_classPrivateFieldLoo7 = _classPrivateFieldLoo6[specName]) === null || _classPrivateFieldLoo7 === void 0 ? void 0 : (_classPrivateFieldLoo8 = _classPrivateFieldLoo7.instances) === null || _classPrivateFieldLoo8 === void 0 ? void 0 : _classPrivateFieldLoo8[moduleName];\n    }\n  }, {\n    key: \"getOrThrow\",\n    value: function getOrThrow(name, msg) {\n      return assertReturn(this.get(name), msg || \"type \".concat(name, \" not found\"));\n    }\n  }, {\n    key: \"getOrUnknown\",\n    value: function getOrUnknown(name) {\n      return this.get(name, true);\n    }\n  }, {\n    key: \"getSignedExtensionExtra\",\n    value: function getSignedExtensionExtra() {\n      return expandExtensionTypes(_classPrivateFieldLooseBase(this, _signedExtensions)[_signedExtensions], 'payload', _classPrivateFieldLooseBase(this, _userExtensions)[_userExtensions]);\n    }\n  }, {\n    key: \"getSignedExtensionTypes\",\n    value: function getSignedExtensionTypes() {\n      return expandExtensionTypes(_classPrivateFieldLooseBase(this, _signedExtensions)[_signedExtensions], 'extrinsic', _classPrivateFieldLooseBase(this, _userExtensions)[_userExtensions]);\n    }\n  }, {\n    key: \"hasClass\",\n    value: function hasClass(name) {\n      return _classPrivateFieldLooseBase(this, _classes)[_classes].has(name);\n    }\n  }, {\n    key: \"hasDef\",\n    value: function hasDef(name) {\n      return _classPrivateFieldLooseBase(this, _definitions)[_definitions].has(name);\n    }\n  }, {\n    key: \"hasType\",\n    value: function hasType(name) {\n      return !_classPrivateFieldLooseBase(this, _unknownTypes)[_unknownTypes].get(name) && (this.hasClass(name) || this.hasDef(name));\n    }\n  }, {\n    key: \"hash\",\n    value: function hash(data) {\n      return this.createType('CodecHash', _classPrivateFieldLooseBase(this, _hasher)[_hasher](data));\n    } // eslint-disable-next-line no-dupe-class-members\n\n  }, {\n    key: \"register\",\n    value: function register(arg1, arg2) {\n      // NOTE Constructors appear as functions here\n      if (isFunction(arg1)) {\n        _classPrivateFieldLooseBase(this, _classes)[_classes].set(arg1.name, arg1);\n      } else if (isString(arg1)) {\n        assert(isFunction(arg2), function () {\n          return \"Expected class definition passed to '\".concat(arg1, \"' registration\");\n        });\n        assert(arg1 !== arg2.toString(), function () {\n          return \"Unable to register circular \".concat(arg1, \" === \").concat(arg1);\n        });\n\n        _classPrivateFieldLooseBase(this, _classes)[_classes].set(arg1, arg2);\n      } else {\n        this._registerObject(arg1);\n      }\n    }\n  }, {\n    key: \"_registerObject\",\n    value: function _registerObject(obj) {\n      var _this2 = this;\n\n      Object.entries(obj).forEach(function (_ref9) {\n        var _ref10 = _slicedToArray(_ref9, 2),\n            name = _ref10[0],\n            type = _ref10[1];\n\n        if (isFunction(type)) {\n          // This _looks_ a bit funny, but `typeof Clazz === 'function'\n          _classPrivateFieldLooseBase(_this2, _classes)[_classes].set(name, type);\n        } else {\n          var def = isString(type) ? type : stringify(type);\n          assert(name !== def, function () {\n            return \"Unable to register circular \".concat(name, \" === \").concat(def);\n          }); // we already have this type, remove the classes registered for it\n\n          if (_classPrivateFieldLooseBase(_this2, _classes)[_classes].has(name)) {\n            _classPrivateFieldLooseBase(_this2, _classes)[_classes].delete(name);\n          }\n\n          _classPrivateFieldLooseBase(_this2, _definitions)[_definitions].set(name, def);\n        }\n      });\n    } // sets the chain properties\n\n  }, {\n    key: \"setChainProperties\",\n    value: function setChainProperties(properties) {\n      if (properties) {\n        _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties] = properties;\n      }\n    }\n  }, {\n    key: \"setHasher\",\n    value: function setHasher(hasher) {\n      _classPrivateFieldLooseBase(this, _hasher)[_hasher] = hasher || blake2AsU8a;\n    }\n  }, {\n    key: \"setKnownTypes\",\n    value: function setKnownTypes(knownTypes) {\n      _classPrivateFieldLooseBase(this, _knownTypes)[_knownTypes] = knownTypes;\n    } // sets the metadata\n\n  }, {\n    key: \"setMetadata\",\n    value: function setMetadata(metadata, signedExtensions, userExtensions) {\n      _classPrivateFieldLooseBase(this, _metadata)[_metadata] = metadata.asLatest;\n      injectExtrinsics(this, metadata, _classPrivateFieldLooseBase(this, _metadataCalls)[_metadataCalls]);\n      injectErrors(this, metadata, _classPrivateFieldLooseBase(this, _metadataErrors)[_metadataErrors]);\n      injectEvents(this, metadata, _classPrivateFieldLooseBase(this, _metadataEvents)[_metadataEvents]); // setup the available extensions\n\n      this.setSignedExtensions(signedExtensions || (metadata.asLatest.extrinsic.version.gt(BN_ZERO) ? metadata.asLatest.extrinsic.signedExtensions.map(function (key) {\n        return key.toString();\n      }) : fallbackExtensions), userExtensions); // setup the chain properties with format overrides\n\n      this.setChainProperties(extractProperties(this, metadata));\n    } // sets the available signed extensions\n\n  }, {\n    key: \"setSignedExtensions\",\n    value: function setSignedExtensions() {\n      var signedExtensions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : fallbackExtensions;\n      var userExtensions = arguments.length > 1 ? arguments[1] : undefined;\n      _classPrivateFieldLooseBase(this, _signedExtensions)[_signedExtensions] = signedExtensions;\n      _classPrivateFieldLooseBase(this, _userExtensions)[_userExtensions] = userExtensions;\n      var unknown = findUnknownExtensions(_classPrivateFieldLooseBase(this, _signedExtensions)[_signedExtensions], _classPrivateFieldLooseBase(this, _userExtensions)[_userExtensions]);\n\n      if (unknown.length) {\n        l.warn(\"Unknown signed extensions \".concat(unknown.join(', '), \" found, treating them as no-effect\"));\n      }\n    }\n  }]);\n\n  return TypeRegistry;\n}();","map":{"version":3,"sources":["/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/@polkadot/types/create/registry.js"],"names":["_defineProperty","_classPrivateFieldLooseBase","_classPrivateFieldLooseKey","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","assert","assertReturn","BN_ZERO","formatBalance","isFunction","isString","isU8a","logger","stringCamelCase","stringify","u8aToHex","blake2AsU8a","DoNotConstruct","Json","Raw","expandExtensionTypes","fallbackExtensions","findUnknownExtensions","GenericEventData","baseTypes","definitions","decorateConstants","decorateExtrinsics","Metadata","createClass","getTypeClass","createTypeUnsafe","getTypeDef","l","injectErrors","_","metadata","metadataErrors","modules","asLatest","_sectionIndex","errors","index","name","sectionIndex","version","toNumber","sectionName","docs","eventIndex","Uint8Array","map","d","toString","method","section","injectEvents","registry","metadataEvents","events","isSome","unwrap","meta","methodIndex","methodName","typeDef","args","arg","Types","getTypes","value","injectExtrinsics","metadataCalls","extrinsics","values","methods","callIndex","extractProperties","_constants$system","original","getChainProperties","constants","ss58Format","system","ss58Prefix","tokenDecimals","tokenSymbol","createType","_classes","_definitions","_metadata","_metadataCalls","_metadataErrors","_metadataEvents","_unknownTypes","_chainProperties","_hasher","_knownDefaults","_knownDefinitions","_knownTypes","_signedExtensions","_userExtensions","TypeRegistry","createdAtHash","writable","Map","init","register","types","_classPrivateFieldLoo","allDecimals","b","_classPrivateFieldLoo2","undefined","_classPrivateFieldLoo3","allTokens","s","getDefaults","unit","test","lookupId","Error","type","params","options","hexIndex","errorIndex","error","withUnknown","Type","get","definition","BaseType","warn","set","with","clazz","entry","entries","find","typeName","specName","moduleName","_classPrivateFieldLoo4","_classPrivateFieldLoo5","_classPrivateFieldLoo6","_classPrivateFieldLoo7","_classPrivateFieldLoo8","typesBundle","spec","instances","msg","has","hasClass","hasDef","data","arg1","arg2","_registerObject","obj","def","delete","properties","hasher","knownTypes","signedExtensions","userExtensions","setSignedExtensions","extrinsic","gt","setChainProperties","unknown","join"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classPrivateFieldLooseBase from \"@babel/runtime/helpers/esm/classPrivateFieldLooseBase\";\nimport _classPrivateFieldLooseKey from \"@babel/runtime/helpers/esm/classPrivateFieldLooseKey\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// Copyright 2017-2021 @polkadot/types authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable @typescript-eslint/no-var-requires */\nimport { assert, assertReturn, BN_ZERO, formatBalance, isFunction, isString, isU8a, logger, stringCamelCase, stringify, u8aToHex } from '@polkadot/util';\nimport { blake2AsU8a } from '@polkadot/util-crypto';\nimport { DoNotConstruct } from \"../codec/DoNotConstruct.js\";\nimport { Json } from \"../codec/Json.js\";\nimport { Raw } from \"../codec/Raw.js\";\nimport { expandExtensionTypes, fallbackExtensions, findUnknownExtensions } from \"../extrinsic/signedExtensions/index.js\";\nimport { GenericEventData } from \"../generic/Event.js\";\nimport * as baseTypes from \"../index.types.js\";\nimport * as definitions from \"../interfaces/definitions.js\";\nimport { decorateConstants, decorateExtrinsics } from \"../metadata/decorate/index.js\";\nimport { Metadata } from \"../metadata/Metadata.js\";\nimport { createClass, getTypeClass } from \"./createClass.js\";\nimport { createTypeUnsafe } from \"./createType.js\";\nimport { getTypeDef } from \"./getTypeDef.js\";\nconst l = logger('registry'); // create error mapping from metadata\n\nfunction injectErrors(_, metadata, metadataErrors) {\n  const modules = metadata.asLatest.modules; // decorate the errors\n\n  modules.forEach(({\n    errors,\n    index,\n    name\n  }, _sectionIndex) => {\n    const sectionIndex = metadata.version >= 12 ? index.toNumber() : _sectionIndex;\n    const sectionName = stringCamelCase(name);\n    errors.forEach(({\n      docs,\n      name\n    }, index) => {\n      const eventIndex = new Uint8Array([sectionIndex, index]);\n      metadataErrors[u8aToHex(eventIndex)] = {\n        docs: docs.map(d => d.toString()),\n        index,\n        method: name.toString(),\n        name: name.toString(),\n        section: sectionName\n      };\n    });\n  });\n} // create event classes from metadata\n\n\nfunction injectEvents(registry, metadata, metadataEvents) {\n  // decorate the events\n  metadata.asLatest.modules.filter(({\n    events\n  }) => events.isSome).forEach(({\n    events,\n    index,\n    name\n  }, _sectionIndex) => {\n    const sectionIndex = metadata.version >= 12 ? index.toNumber() : _sectionIndex;\n    const sectionName = stringCamelCase(name);\n    events.unwrap().forEach((meta, methodIndex) => {\n      const methodName = meta.name.toString();\n      const typeDef = meta.args.map(arg => getTypeDef(arg));\n      let Types = null; // Lazy create the actual type classes right at the point of use\n\n      const getTypes = () => {\n        if (!Types) {\n          Types = typeDef.map(typeDef => getTypeClass(registry, typeDef));\n        }\n\n        return Types;\n      };\n\n      metadataEvents[u8aToHex(new Uint8Array([sectionIndex, methodIndex]))] = class extends GenericEventData {\n        constructor(registry, value) {\n          super(registry, value, getTypes(), typeDef, meta, sectionName, methodName);\n        }\n\n      };\n    });\n  });\n} // create extrinsic mapping from metadata\n\n\nfunction injectExtrinsics(registry, metadata, metadataCalls) {\n  const extrinsics = decorateExtrinsics(registry, metadata.asLatest, metadata.version); // decorate the extrinsics\n\n  Object.values(extrinsics).forEach(methods => Object.values(methods).forEach(method => {\n    metadataCalls[u8aToHex(method.callIndex)] = method;\n  }));\n} // extract additional properties from the metadata\n\n\nfunction extractProperties(registry, metadata) {\n  var _constants$system;\n\n  const original = registry.getChainProperties();\n  const constants = decorateConstants(registry, metadata.asLatest, metadata.version);\n  const ss58Format = (_constants$system = constants.system) === null || _constants$system === void 0 ? void 0 : _constants$system.ss58Prefix;\n\n  if (!ss58Format) {\n    return original;\n  }\n\n  const {\n    tokenDecimals,\n    tokenSymbol\n  } = original || {};\n  return registry.createType('ChainProperties', {\n    ss58Format,\n    tokenDecimals,\n    tokenSymbol\n  });\n}\n\nvar _classes = /*#__PURE__*/_classPrivateFieldLooseKey(\"classes\");\n\nvar _definitions = /*#__PURE__*/_classPrivateFieldLooseKey(\"definitions\");\n\nvar _metadata = /*#__PURE__*/_classPrivateFieldLooseKey(\"metadata\");\n\nvar _metadataCalls = /*#__PURE__*/_classPrivateFieldLooseKey(\"metadataCalls\");\n\nvar _metadataErrors = /*#__PURE__*/_classPrivateFieldLooseKey(\"metadataErrors\");\n\nvar _metadataEvents = /*#__PURE__*/_classPrivateFieldLooseKey(\"metadataEvents\");\n\nvar _unknownTypes = /*#__PURE__*/_classPrivateFieldLooseKey(\"unknownTypes\");\n\nvar _chainProperties = /*#__PURE__*/_classPrivateFieldLooseKey(\"chainProperties\");\n\nvar _hasher = /*#__PURE__*/_classPrivateFieldLooseKey(\"hasher\");\n\nvar _knownDefaults = /*#__PURE__*/_classPrivateFieldLooseKey(\"knownDefaults\");\n\nvar _knownDefinitions = /*#__PURE__*/_classPrivateFieldLooseKey(\"knownDefinitions\");\n\nvar _knownTypes = /*#__PURE__*/_classPrivateFieldLooseKey(\"knownTypes\");\n\nvar _signedExtensions = /*#__PURE__*/_classPrivateFieldLooseKey(\"signedExtensions\");\n\nvar _userExtensions = /*#__PURE__*/_classPrivateFieldLooseKey(\"userExtensions\");\n\nexport class TypeRegistry {\n  constructor(createdAtHash) {\n    Object.defineProperty(this, _classes, {\n      writable: true,\n      value: new Map()\n    });\n    Object.defineProperty(this, _definitions, {\n      writable: true,\n      value: new Map()\n    });\n    Object.defineProperty(this, _metadata, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _metadataCalls, {\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, _metadataErrors, {\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, _metadataEvents, {\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, _unknownTypes, {\n      writable: true,\n      value: new Map()\n    });\n    Object.defineProperty(this, _chainProperties, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _hasher, {\n      writable: true,\n      value: blake2AsU8a\n    });\n    Object.defineProperty(this, _knownDefaults, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _knownDefinitions, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _knownTypes, {\n      writable: true,\n      value: {}\n    });\n    Object.defineProperty(this, _signedExtensions, {\n      writable: true,\n      value: fallbackExtensions\n    });\n    Object.defineProperty(this, _userExtensions, {\n      writable: true,\n      value: void 0\n    });\n    this.createdAtHash = void 0;\n    _classPrivateFieldLooseBase(this, _knownDefaults)[_knownDefaults] = _objectSpread({\n      Json,\n      Metadata,\n      Raw\n    }, baseTypes);\n    _classPrivateFieldLooseBase(this, _knownDefinitions)[_knownDefinitions] = definitions;\n    this.init();\n\n    if (createdAtHash) {\n      this.createdAtHash = this.createType('Hash', createdAtHash);\n    }\n  }\n\n  init() {\n    // start clean\n    _classPrivateFieldLooseBase(this, _classes)[_classes] = new Map();\n    _classPrivateFieldLooseBase(this, _definitions)[_definitions] = new Map();\n    _classPrivateFieldLooseBase(this, _unknownTypes)[_unknownTypes] = new Map();\n    _classPrivateFieldLooseBase(this, _knownTypes)[_knownTypes] = {}; // register know, first classes then on-demand-created definitions\n\n    this.register(_classPrivateFieldLooseBase(this, _knownDefaults)[_knownDefaults]);\n    Object.values(_classPrivateFieldLooseBase(this, _knownDefinitions)[_knownDefinitions]).forEach(({\n      types\n    }) => this.register(types));\n    return this;\n  }\n\n  get chainDecimals() {\n    var _classPrivateFieldLoo;\n\n    if ((_classPrivateFieldLoo = _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties]) !== null && _classPrivateFieldLoo !== void 0 && _classPrivateFieldLoo.tokenDecimals.isSome) {\n      const allDecimals = _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties].tokenDecimals.unwrap();\n\n      if (allDecimals.length) {\n        return allDecimals.map(b => b.toNumber());\n      }\n    }\n\n    return [12];\n  }\n\n  get chainSS58() {\n    var _classPrivateFieldLoo2;\n\n    return (_classPrivateFieldLoo2 = _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties]) !== null && _classPrivateFieldLoo2 !== void 0 && _classPrivateFieldLoo2.ss58Format.isSome ? _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties].ss58Format.unwrap().toNumber() : undefined;\n  }\n\n  get chainTokens() {\n    var _classPrivateFieldLoo3;\n\n    if ((_classPrivateFieldLoo3 = _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties]) !== null && _classPrivateFieldLoo3 !== void 0 && _classPrivateFieldLoo3.tokenSymbol.isSome) {\n      const allTokens = _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties].tokenSymbol.unwrap();\n\n      if (allTokens.length) {\n        return allTokens.map(s => s.toString());\n      }\n    }\n\n    return [formatBalance.getDefaults().unit];\n  }\n  /**\n   * @description Returns tru if the type is in a Compat format\n   */\n\n\n  isLookupType(value) {\n    return /Lookup\\d+$/.test(value);\n  }\n  /**\n   * @description Creates a lookup string from the supplied id\n   */\n\n\n  createLookupType(lookupId) {\n    return `Lookup${lookupId.toString()}`;\n  }\n\n  get knownTypes() {\n    return _classPrivateFieldLooseBase(this, _knownTypes)[_knownTypes];\n  }\n\n  get lookup() {\n    throw new Error('Unimplemented'); // return this.metadata.lookup;\n  }\n\n  get metadata() {\n    assert(_classPrivateFieldLooseBase(this, _metadata)[_metadata], 'Metadata has not been set on this registry');\n    return _classPrivateFieldLooseBase(this, _metadata)[_metadata];\n  }\n\n  get unknownTypes() {\n    return [..._classPrivateFieldLooseBase(this, _unknownTypes)[_unknownTypes].keys()];\n  }\n\n  get signedExtensions() {\n    return _classPrivateFieldLooseBase(this, _signedExtensions)[_signedExtensions];\n  }\n  /**\n   * @describe Creates an instance of the class\n   */\n\n\n  createClass(type) {\n    return createClass(this, type);\n  }\n  /**\n   * @description Creates an instance of a type as registered\n   */\n\n\n  createType(type, ...params) {\n    return createTypeUnsafe(this, type, params);\n  }\n  /**\n   * @description Creates an instance of a type as registered\n   */\n\n\n  createTypeUnsafe(type, params, options) {\n    return createTypeUnsafe(this, type, params, options);\n  } // find a specific call\n\n\n  findMetaCall(callIndex) {\n    const hexIndex = u8aToHex(callIndex);\n    return assertReturn(_classPrivateFieldLooseBase(this, _metadataCalls)[_metadataCalls][hexIndex], `findMetaCall: Unable to find Call with index ${hexIndex}/[${callIndex.toString()}]`);\n  } // finds an error\n\n\n  findMetaError(errorIndex) {\n    const hexIndex = u8aToHex(isU8a(errorIndex) ? errorIndex : new Uint8Array([errorIndex.index.toNumber(), errorIndex.error.toNumber()]));\n    return assertReturn(_classPrivateFieldLooseBase(this, _metadataErrors)[_metadataErrors][hexIndex], `findMetaError: Unable to find Error with index ${hexIndex}/[${errorIndex.toString()}]`);\n  }\n\n  findMetaEvent(eventIndex) {\n    const hexIndex = u8aToHex(eventIndex);\n    return assertReturn(_classPrivateFieldLooseBase(this, _metadataEvents)[_metadataEvents][hexIndex], `findMetaEvent: Unable to find Event with index ${hexIndex}/[${eventIndex.toString()}]`);\n  }\n\n  get(name, withUnknown) {\n    let Type = _classPrivateFieldLooseBase(this, _classes)[_classes].get(name); // we have not already created the type, attempt it\n\n\n    if (!Type) {\n      const definition = _classPrivateFieldLooseBase(this, _definitions)[_definitions].get(name);\n\n      let BaseType; // we have a definition, so create the class now (lazily)\n\n      if (definition) {\n        BaseType = createClass(this, definition);\n      } else if (withUnknown) {\n        l.warn(`Unable to resolve type ${name}, it will fail on construction`);\n\n        _classPrivateFieldLooseBase(this, _unknownTypes)[_unknownTypes].set(name, true);\n\n        BaseType = DoNotConstruct.with(name);\n      }\n\n      if (BaseType) {\n        // NOTE If we didn't extend here, we would have strange artifacts. An example is\n        // Balance, with this, new Balance() instanceof u128 is true, but Balance !== u128\n        // Additionally, we now pass through the registry, which is a link to ourselves\n        Type = class extends BaseType {};\n\n        _classPrivateFieldLooseBase(this, _classes)[_classes].set(name, Type);\n      }\n    }\n\n    return Type;\n  }\n\n  getChainProperties() {\n    return _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties];\n  }\n\n  getClassName(clazz) {\n    const entry = [..._classPrivateFieldLooseBase(this, _classes)[_classes].entries()].find(([, test]) => test === clazz);\n    return entry ? entry[0] : undefined;\n  }\n\n  getDefinition(typeName) {\n    return _classPrivateFieldLooseBase(this, _definitions)[_definitions].get(typeName);\n  }\n\n  getModuleInstances(specName, moduleName) {\n    var _classPrivateFieldLoo4, _classPrivateFieldLoo5, _classPrivateFieldLoo6, _classPrivateFieldLoo7, _classPrivateFieldLoo8;\n\n    return (_classPrivateFieldLoo4 = _classPrivateFieldLooseBase(this, _knownTypes)[_knownTypes]) === null || _classPrivateFieldLoo4 === void 0 ? void 0 : (_classPrivateFieldLoo5 = _classPrivateFieldLoo4.typesBundle) === null || _classPrivateFieldLoo5 === void 0 ? void 0 : (_classPrivateFieldLoo6 = _classPrivateFieldLoo5.spec) === null || _classPrivateFieldLoo6 === void 0 ? void 0 : (_classPrivateFieldLoo7 = _classPrivateFieldLoo6[specName]) === null || _classPrivateFieldLoo7 === void 0 ? void 0 : (_classPrivateFieldLoo8 = _classPrivateFieldLoo7.instances) === null || _classPrivateFieldLoo8 === void 0 ? void 0 : _classPrivateFieldLoo8[moduleName];\n  }\n\n  getOrThrow(name, msg) {\n    return assertReturn(this.get(name), msg || `type ${name} not found`);\n  }\n\n  getOrUnknown(name) {\n    return this.get(name, true);\n  }\n\n  getSignedExtensionExtra() {\n    return expandExtensionTypes(_classPrivateFieldLooseBase(this, _signedExtensions)[_signedExtensions], 'payload', _classPrivateFieldLooseBase(this, _userExtensions)[_userExtensions]);\n  }\n\n  getSignedExtensionTypes() {\n    return expandExtensionTypes(_classPrivateFieldLooseBase(this, _signedExtensions)[_signedExtensions], 'extrinsic', _classPrivateFieldLooseBase(this, _userExtensions)[_userExtensions]);\n  }\n\n  hasClass(name) {\n    return _classPrivateFieldLooseBase(this, _classes)[_classes].has(name);\n  }\n\n  hasDef(name) {\n    return _classPrivateFieldLooseBase(this, _definitions)[_definitions].has(name);\n  }\n\n  hasType(name) {\n    return !_classPrivateFieldLooseBase(this, _unknownTypes)[_unknownTypes].get(name) && (this.hasClass(name) || this.hasDef(name));\n  }\n\n  hash(data) {\n    return this.createType('CodecHash', _classPrivateFieldLooseBase(this, _hasher)[_hasher](data));\n  }\n\n  // eslint-disable-next-line no-dupe-class-members\n  register(arg1, arg2) {\n    // NOTE Constructors appear as functions here\n    if (isFunction(arg1)) {\n      _classPrivateFieldLooseBase(this, _classes)[_classes].set(arg1.name, arg1);\n    } else if (isString(arg1)) {\n      assert(isFunction(arg2), () => `Expected class definition passed to '${arg1}' registration`);\n      assert(arg1 !== arg2.toString(), () => `Unable to register circular ${arg1} === ${arg1}`);\n\n      _classPrivateFieldLooseBase(this, _classes)[_classes].set(arg1, arg2);\n    } else {\n      this._registerObject(arg1);\n    }\n  }\n\n  _registerObject(obj) {\n    Object.entries(obj).forEach(([name, type]) => {\n      if (isFunction(type)) {\n        // This _looks_ a bit funny, but `typeof Clazz === 'function'\n        _classPrivateFieldLooseBase(this, _classes)[_classes].set(name, type);\n      } else {\n        const def = isString(type) ? type : stringify(type);\n        assert(name !== def, () => `Unable to register circular ${name} === ${def}`); // we already have this type, remove the classes registered for it\n\n        if (_classPrivateFieldLooseBase(this, _classes)[_classes].has(name)) {\n          _classPrivateFieldLooseBase(this, _classes)[_classes].delete(name);\n        }\n\n        _classPrivateFieldLooseBase(this, _definitions)[_definitions].set(name, def);\n      }\n    });\n  } // sets the chain properties\n\n\n  setChainProperties(properties) {\n    if (properties) {\n      _classPrivateFieldLooseBase(this, _chainProperties)[_chainProperties] = properties;\n    }\n  }\n\n  setHasher(hasher) {\n    _classPrivateFieldLooseBase(this, _hasher)[_hasher] = hasher || blake2AsU8a;\n  }\n\n  setKnownTypes(knownTypes) {\n    _classPrivateFieldLooseBase(this, _knownTypes)[_knownTypes] = knownTypes;\n  } // sets the metadata\n\n\n  setMetadata(metadata, signedExtensions, userExtensions) {\n    _classPrivateFieldLooseBase(this, _metadata)[_metadata] = metadata.asLatest;\n    injectExtrinsics(this, metadata, _classPrivateFieldLooseBase(this, _metadataCalls)[_metadataCalls]);\n    injectErrors(this, metadata, _classPrivateFieldLooseBase(this, _metadataErrors)[_metadataErrors]);\n    injectEvents(this, metadata, _classPrivateFieldLooseBase(this, _metadataEvents)[_metadataEvents]); // setup the available extensions\n\n    this.setSignedExtensions(signedExtensions || (metadata.asLatest.extrinsic.version.gt(BN_ZERO) ? metadata.asLatest.extrinsic.signedExtensions.map(key => key.toString()) : fallbackExtensions), userExtensions); // setup the chain properties with format overrides\n\n    this.setChainProperties(extractProperties(this, metadata));\n  } // sets the available signed extensions\n\n\n  setSignedExtensions(signedExtensions = fallbackExtensions, userExtensions) {\n    _classPrivateFieldLooseBase(this, _signedExtensions)[_signedExtensions] = signedExtensions;\n    _classPrivateFieldLooseBase(this, _userExtensions)[_userExtensions] = userExtensions;\n    const unknown = findUnknownExtensions(_classPrivateFieldLooseBase(this, _signedExtensions)[_signedExtensions], _classPrivateFieldLooseBase(this, _userExtensions)[_userExtensions]);\n\n    if (unknown.length) {\n      l.warn(`Unknown signed extensions ${unknown.join(', ')} found, treating them as no-effect`);\n    }\n  }\n\n}"]},"metadata":{},"sourceType":"module"}