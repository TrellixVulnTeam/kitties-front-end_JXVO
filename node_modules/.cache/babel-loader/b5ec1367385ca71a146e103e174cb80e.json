{"ast":null,"code":"// Copyright 2017-2021 @polkadot/util authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { isUndefined } from \"./is/undefined.js\";\nimport { stringify } from \"./stringify.js\";\n\nfunction defaultGetId() {\n  return 'none';\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nexport function memoize(fn) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$getInstanceId = _ref.getInstanceId,\n      getInstanceId = _ref$getInstanceId === void 0 ? defaultGetId : _ref$getInstanceId;\n\n  var cache = {};\n\n  var memoized = function memoized() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var stringParams = stringify(args);\n    var instanceId = getInstanceId();\n\n    if (!cache[instanceId]) {\n      cache[instanceId] = {};\n    }\n\n    if (isUndefined(cache[instanceId][stringParams])) {\n      cache[instanceId][stringParams] = fn.apply(void 0, args);\n    }\n\n    return cache[instanceId][stringParams];\n  };\n\n  memoized.unmemoize = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var stringParams = stringify(args);\n    var instanceId = getInstanceId();\n\n    if (cache[instanceId] && !isUndefined(cache[instanceId][stringParams])) {\n      delete cache[instanceId][stringParams];\n    }\n  };\n\n  return memoized;\n}","map":{"version":3,"sources":["/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/@polkadot/util/memoize.js"],"names":["isUndefined","stringify","defaultGetId","memoize","fn","getInstanceId","cache","memoized","args","stringParams","instanceId","unmemoize"],"mappings":"AAAA;AACA;AACA,SAASA,WAAT,QAA4B,mBAA5B;AACA,SAASC,SAAT,QAA0B,gBAA1B;;AAEA,SAASC,YAAT,GAAwB;AACtB,SAAO,MAAP;AACD,C,CAAC;;;AAGF,OAAO,SAASC,OAAT,CAAiBC,EAAjB,EAEC;AAAA,iFAAJ,EAAI;AAAA,gCADNC,aACM;AAAA,MADNA,aACM,mCADUH,YACV;;AACN,MAAMI,KAAK,GAAG,EAAd;;AAEA,MAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAa;AAAA,sCAATC,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAC5B,QAAMC,YAAY,GAAGR,SAAS,CAACO,IAAD,CAA9B;AACA,QAAME,UAAU,GAAGL,aAAa,EAAhC;;AAEA,QAAI,CAACC,KAAK,CAACI,UAAD,CAAV,EAAwB;AACtBJ,MAAAA,KAAK,CAACI,UAAD,CAAL,GAAoB,EAApB;AACD;;AAED,QAAIV,WAAW,CAACM,KAAK,CAACI,UAAD,CAAL,CAAkBD,YAAlB,CAAD,CAAf,EAAkD;AAChDH,MAAAA,KAAK,CAACI,UAAD,CAAL,CAAkBD,YAAlB,IAAkCL,EAAE,MAAF,SAAMI,IAAN,CAAlC;AACD;;AAED,WAAOF,KAAK,CAACI,UAAD,CAAL,CAAkBD,YAAlB,CAAP;AACD,GAbD;;AAeAF,EAAAA,QAAQ,CAACI,SAAT,GAAqB,YAAa;AAAA,uCAATH,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAChC,QAAMC,YAAY,GAAGR,SAAS,CAACO,IAAD,CAA9B;AACA,QAAME,UAAU,GAAGL,aAAa,EAAhC;;AAEA,QAAIC,KAAK,CAACI,UAAD,CAAL,IAAqB,CAACV,WAAW,CAACM,KAAK,CAACI,UAAD,CAAL,CAAkBD,YAAlB,CAAD,CAArC,EAAwE;AACtE,aAAOH,KAAK,CAACI,UAAD,CAAL,CAAkBD,YAAlB,CAAP;AACD;AACF,GAPD;;AASA,SAAOF,QAAP;AACD","sourcesContent":["// Copyright 2017-2021 @polkadot/util authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { isUndefined } from \"./is/undefined.js\";\nimport { stringify } from \"./stringify.js\";\n\nfunction defaultGetId() {\n  return 'none';\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nexport function memoize(fn, {\n  getInstanceId = defaultGetId\n} = {}) {\n  const cache = {};\n\n  const memoized = (...args) => {\n    const stringParams = stringify(args);\n    const instanceId = getInstanceId();\n\n    if (!cache[instanceId]) {\n      cache[instanceId] = {};\n    }\n\n    if (isUndefined(cache[instanceId][stringParams])) {\n      cache[instanceId][stringParams] = fn(...args);\n    }\n\n    return cache[instanceId][stringParams];\n  };\n\n  memoized.unmemoize = (...args) => {\n    const stringParams = stringify(args);\n    const instanceId = getInstanceId();\n\n    if (cache[instanceId] && !isUndefined(cache[instanceId][stringParams])) {\n      delete cache[instanceId][stringParams];\n    }\n  };\n\n  return memoized;\n}"]},"metadata":{},"sourceType":"module"}