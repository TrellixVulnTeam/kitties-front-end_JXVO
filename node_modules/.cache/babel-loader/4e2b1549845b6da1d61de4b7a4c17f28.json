{"ast":null,"code":"import _slicedToArray from \"/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n// Copyright 2017-2021 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { combineLatest, map, of, switchMap } from 'rxjs';\nimport { memo } from \"../util/index.js\";\nexport function _members(instanceId, api) {\n  return memo(instanceId, function (accountIds) {\n    return combineLatest([of(accountIds), api.query.society.payouts.multi(accountIds), api.query.society.strikes.multi(accountIds), api.query.society.defenderVotes.multi(accountIds), api.query.society.suspendedMembers.multi(accountIds), api.query.society.vouching.multi(accountIds)]).pipe(map(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 6),\n          accountIds = _ref2[0],\n          payouts = _ref2[1],\n          strikes = _ref2[2],\n          defenderVotes = _ref2[3],\n          suspended = _ref2[4],\n          vouching = _ref2[5];\n\n      return accountIds.map(function (accountId, index) {\n        return {\n          accountId: accountId,\n          isDefenderVoter: defenderVotes[index].isSome,\n          isSuspended: suspended[index].isTrue,\n          payouts: payouts[index],\n          strikes: strikes[index],\n          vote: defenderVotes[index].unwrapOr(undefined),\n          vouching: vouching[index].unwrapOr(undefined)\n        };\n      });\n    }));\n  });\n}\n/**\n * @description Get the member info for a society\n */\n\nexport function members(instanceId, api) {\n  return memo(instanceId, function () {\n    return api.query.society.members().pipe(switchMap(function (members) {\n      return api.derive.society._members(members);\n    }));\n  });\n}","map":{"version":3,"sources":["/home/spren/workspace/slides/advanced/term-03/03_polkadot-js-api/kitties/frontend/node_modules/@polkadot/api-derive/society/members.js"],"names":["combineLatest","map","of","switchMap","memo","_members","instanceId","api","accountIds","query","society","payouts","multi","strikes","defenderVotes","suspendedMembers","vouching","pipe","suspended","accountId","index","isDefenderVoter","isSome","isSuspended","isTrue","vote","unwrapOr","undefined","members","derive"],"mappings":";AAAA;AACA;AACA,SAASA,aAAT,EAAwBC,GAAxB,EAA6BC,EAA7B,EAAiCC,SAAjC,QAAkD,MAAlD;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAO,SAASC,QAAT,CAAkBC,UAAlB,EAA8BC,GAA9B,EAAmC;AACxC,SAAOH,IAAI,CAACE,UAAD,EAAa,UAAAE,UAAU;AAAA,WAAIR,aAAa,CAAC,CAACE,EAAE,CAACM,UAAD,CAAH,EAAiBD,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkBC,OAAlB,CAA0BC,KAA1B,CAAgCJ,UAAhC,CAAjB,EAA8DD,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkBG,OAAlB,CAA0BD,KAA1B,CAAgCJ,UAAhC,CAA9D,EAA2GD,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkBI,aAAlB,CAAgCF,KAAhC,CAAsCJ,UAAtC,CAA3G,EAA8JD,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkBK,gBAAlB,CAAmCH,KAAnC,CAAyCJ,UAAzC,CAA9J,EAAoND,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkBM,QAAlB,CAA2BJ,KAA3B,CAAiCJ,UAAjC,CAApN,CAAD,CAAb,CAAiRS,IAAjR,CAAsRhB,GAAG,CAAC;AAAA;AAAA,UAAEO,UAAF;AAAA,UAAcG,OAAd;AAAA,UAAuBE,OAAvB;AAAA,UAAgCC,aAAhC;AAAA,UAA+CI,SAA/C;AAAA,UAA0DF,QAA1D;;AAAA,aAAwER,UAAU,CAACP,GAAX,CAAe,UAACkB,SAAD,EAAYC,KAAZ;AAAA,eAAuB;AAC5aD,UAAAA,SAAS,EAATA,SAD4a;AAE5aE,UAAAA,eAAe,EAAEP,aAAa,CAACM,KAAD,CAAb,CAAqBE,MAFsY;AAG5aC,UAAAA,WAAW,EAAEL,SAAS,CAACE,KAAD,CAAT,CAAiBI,MAH8Y;AAI5ab,UAAAA,OAAO,EAAEA,OAAO,CAACS,KAAD,CAJ4Z;AAK5aP,UAAAA,OAAO,EAAEA,OAAO,CAACO,KAAD,CAL4Z;AAM5aK,UAAAA,IAAI,EAAEX,aAAa,CAACM,KAAD,CAAb,CAAqBM,QAArB,CAA8BC,SAA9B,CANsa;AAO5aX,UAAAA,QAAQ,EAAEA,QAAQ,CAACI,KAAD,CAAR,CAAgBM,QAAhB,CAAyBC,SAAzB;AAPka,SAAvB;AAAA,OAAf,CAAxE;AAAA,KAAD,CAAzR,CAAJ;AAAA,GAAvB,CAAX;AASD;AACD;AACA;AACA;;AAEA,OAAO,SAASC,OAAT,CAAiBtB,UAAjB,EAA6BC,GAA7B,EAAkC;AACvC,SAAOH,IAAI,CAACE,UAAD,EAAa;AAAA,WAAMC,GAAG,CAACE,KAAJ,CAAUC,OAAV,CAAkBkB,OAAlB,GAA4BX,IAA5B,CAAiCd,SAAS,CAAC,UAAAyB,OAAO;AAAA,aAAIrB,GAAG,CAACsB,MAAJ,CAAWnB,OAAX,CAAmBL,QAAnB,CAA4BuB,OAA5B,CAAJ;AAAA,KAAR,CAA1C,CAAN;AAAA,GAAb,CAAX;AACD","sourcesContent":["// Copyright 2017-2021 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { combineLatest, map, of, switchMap } from 'rxjs';\nimport { memo } from \"../util/index.js\";\nexport function _members(instanceId, api) {\n  return memo(instanceId, accountIds => combineLatest([of(accountIds), api.query.society.payouts.multi(accountIds), api.query.society.strikes.multi(accountIds), api.query.society.defenderVotes.multi(accountIds), api.query.society.suspendedMembers.multi(accountIds), api.query.society.vouching.multi(accountIds)]).pipe(map(([accountIds, payouts, strikes, defenderVotes, suspended, vouching]) => accountIds.map((accountId, index) => ({\n    accountId,\n    isDefenderVoter: defenderVotes[index].isSome,\n    isSuspended: suspended[index].isTrue,\n    payouts: payouts[index],\n    strikes: strikes[index],\n    vote: defenderVotes[index].unwrapOr(undefined),\n    vouching: vouching[index].unwrapOr(undefined)\n  })))));\n}\n/**\n * @description Get the member info for a society\n */\n\nexport function members(instanceId, api) {\n  return memo(instanceId, () => api.query.society.members().pipe(switchMap(members => api.derive.society._members(members))));\n}"]},"metadata":{},"sourceType":"module"}